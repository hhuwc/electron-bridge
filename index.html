<!-- index.html - 宿主页面 -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Electron Webview Sync Bridge Host</title>
</head>
<body>
    <h1>宿主页面</h1>
    <webview
        src="webview.html"
        id="bridgeWebview"
        style="width: 800px; height: 600px; border: 1px solid #ccc;"
        webpreferences="webSecurity: false; contextIsolation: false"
        nodeintegration="true"
    ></webview>

    <script>
        const { ipcRenderer } = window.electron;
        const webview = document.getElementById('bridgeWebview');

        // 等待webview加载完成
        webview.addEventListener('did-finish-load', () => {
            console.log('webview加载完成，开始监听请求');
            const webContentsId = webview.getWebContentsId();
            console.log('webContentsId:', webContentsId);
            ipcRenderer.send('webview-loaded', webContentsId);
            return;
        });
    </script>
</body>
</html>
